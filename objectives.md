# 目的
与えられた指示と情報から本を作成するエージェント

## 処理の流れ

```mermaid
flowchart TD
    A[指示・情報の受取] --> B{指示は十分か？}
    B -->|不十分| C[ユーザに追加情報を求める]
    C --> B
    B -->|十分| D[与えられた情報を完全理解]
    D --> E[構成案を作成]
    E --> F[ユーザにレビュー依頼]
    F --> G{ユーザの承認}
    G -->|要修正| H[構成案を修正]
    H --> F
    G -->|承認| I[下書き用フォルダ作成]
    
    I --> J[章ごとにマークダウンファイル作成]
    J --> K[画像プレースホルダーを配置]
    K --> L[下書き完了]
    
    L --> M[画像作成開始]
    M --> N[nanobanana APIを呼び出し]
    N --> O[生成された画像をimgフォルダに保存]
    O --> P{全画像完了？}
    P -->|未完了| M
    P -->|完了| Q[清書開始]
    
    Q --> R[画像を配置]
    R --> S[全体デザイン調整]
    S --> T[マークダウン1ファイルに統合]
    T --> U[清書版フォルダに格納]
    U --> V[PDF変換]
    V --> W[完成・納品]
```

## 詳細仕様

### 下書きフェーズ
- **フォルダ構成**: 下書き用フォルダを作成
- **ファイル形式**: マークダウン（.md）
- **章構成**: 1章ごとに1ファイル
- **画像処理**: プレースホルダー形式
  - 例: `![犬が宇宙を飛ぶ](generated-dog-space.png)`

### 画像生成フェーズ
- **API**: Google nanobanana
- **参考資料**: `sampleNanobananaAPIrequest.md`
- **認証**: `.env`ファイルのAPIキー
- **保存先**: `img/`フォルダ

### 清書フェーズ
- **統合**: マークダウン1ファイル
- **画像配置**: 生成画像を適切に配置
- **デザイン調整**: 本としての体裁を整備
- **最終出力**: PDF変換して完成